---
name: Dungeoneer
year: 2024
description: Comprova quins objectes falten a un personatge a Final Fantasy XIV.
technologies:
  ["Next.js", "Cheerio", "Supabase", "Redis", "PostgreSQL", "Vercel"]
headerImage:
  src: "/portfolio/projects/dungeoneer.jpg"
  alt: "Captura de pantalla del lloc web de Dungeoneer"
cardImage:
  src: "/portfolio/cards/dungeoneer.png"
  alt: "Captura de pantalla del lloc web de Dungeoneer al mòbil"
liveWebsite: "https://xiv-dungeoneer.vercel.app"
repository: "https://github.com/gomisroca/dungeoneer"
---

<strong>Dungeoneer</strong> és un projecte destinat a fer un seguiment de quins
objectes de col·leccionisme us falten a les masmorres, proves o incursions al
joc Final Fantasy XIV. Podeu emmagatzemar la vostra col·lecció localment o
iniciar sessió i desar-la al vostre compte.

<hr />

<h1 class="text-2xl">Tecnologies i Eines</h1>
<ul>
  <li>
    <h6 className="text-lg font-semibold">Next.js</h6>
    <p>
      Es va triar Next.js com framework per al projecte degut a la seva
      simplicitat, facilitat d'ús i adopció en tota la indústria. A més, sabíem
      que gran part del projecte podria beneficiar-se de la renderització del
      costat del servidor, en la qual Next.js destaca.
    </p>
    <p>
      Optem per usar el modern Next.js App Router, i en 2025 canviem de tRPC a
      una combinació d'accions del servidor i rutes API.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Redis</h6>
    <p>
      El projecte conté grans conjunts de dades als quals s'accedeix amb
      freqüència, com a llistes d'objectes o instàncies. Per tant, integrem
      Redis per a optimitzar el rendiment emmagatzemant-los en cache. Això va
      reduir la càrrega de la base de dades i va millorar significativament els
      temps de resposta per a operacions de lectura intensiva.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Auth.js</h6>
    <p>
      Una de les principals característiques del projecte és la capacitat
      d'iniciar sessió i emmagatzemar la teva col·lecció en el teu compte. Per a
      aconseguir-ho, usem Auth.js, que proporciona una forma simple i segura de
      manejar l'autenticació i autorització d'usuaris.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Cheerio</h6>
    <p>
      Recopilar informació de "The Lodestone", el lloc web de Final Fantasy XIV,
      és una tasca molt comuna en el projecte. Sovint necessitem buscar
      personatges o informació específica sobre la col·lecció d'objectes d'un
      personatge. Per a aconseguir-ho, usem Cheerio, una biblioteca d'anàlisi
      HTML ràpida i flexible, que ens va permetre extreure informació del lloc
      web fàcilment.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">TailwindCSS + Motion</h6>
    <p>
      Tailwind ens va proporcionar una manera ràpida i fiable d'estilitzar el
      projecte. No obstant això, hem volgut afegir algunes animacions a
      determinats elements i hem utilitzat Motion (abans Framer Motion) per
      aconseguir-ho.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Supabase</h6>
    <p>
      Supabase és una base de dades al núvol que proporciona una solució robusta
      i escalable per emmagatzemar i recuperar dades. El vam utilitzar per
      emmagatzemar les dades del joc, la colecció i la informació de l'usuari i
      per gestionar l'autenticació de l'usuari. A més, fem servir Supabase
      Buckets per emmagatzemar les imatges dels articles.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Vercel</h6>
    <p>
      Com que vam decidir utilitzar Next.js, la implementació a Vercel semblava
      la millor i més eficient opció. Hem utilitzat Analytics i Speed Insights
      de Vercel per garantir que el projecte funcionés correctament.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">
      tRPC <span className="text-sm text-zinc-500 uppercase">Obsolet</span>
    </h6>
    <p>
      Esperàvem que el projecte tingués moltes interaccions amb l'API i tipus de
      dades complexes, per la qual cosa decidim usar tRPC per a gestionar la
      comunicació entre el client i el servidor i garantir la seguretat de tipus
      i un desenvolupament més ràpid i segur.
    </p>
    <p>
      En 2025, vam donar per obsolet tRPC en favor d'una combinació d'accions de
      servidor i rutes de API, aprofitant les característiques natives de
      Next.js, les edge functions i l'emmagatzematge en cache basat en Redis per
      a millorar el rendiment i la facilitat de manteniment.
    </p>
  </li>
</ul>

<hr />

<h1 class="text-2xl">Rols i Responsabilitats</h1>
Aquest projecte va ser desenvolupat per primera vegada per un equip de tres
desenvolupadors l'any 2022. Tanmateix, finalment es va abandonar i em vaig fer
càrrec del projecte l'any 2024 com a únic desenvolupador.
<ul>
  <li>
    <h6 className="text-lg font-semibold">Dissenyador UI/UX</h6>
    <p>
      Disseny de la interfície d'usuari i l'experiència d'usuari del projecte.
      Vaig utilitzar Figma per crear els dissenys i els vaig implementar al
      projecte mitjançant TailwindCSS i Motion.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Desenvolupador Full-stack</h6>
    <p>
      Implementar la funcionalitat del projecte i garantir que era segur i
      escalable. Vaig utilitzar Next.js, tRPC, NextAuth.js i Supabase entre
      altres eines per crear el projecte.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Mánager del projecte</h6>
    <p>
      Com a desenvolupador únic, vaig ser responsable de la seva administració i
      manteniment general. Em vaig assegurar que el projecte es mantingués
      encaminat, amb un enfocament en les característiques principals i les
      correccions d'errors, sense permetre que l'acumulació de característiques
      distorsionés la direcció del projecte.
    </p>
  </li>
</ul>

<hr />

<h1 class="text-2xl">Reptes i Solucions</h1>
<ul>
  <li>
    <h6 className="text-lg font-semibold">Revisió del projecte</h6>
    <p>
      Un cop em vaig fer càrrec com a desenvolupador únic, vaig saber dues
      coses: el projecte estava inacabat i les tecnologies utilitzades estaven
      obsoletes. En aquest estat inicial, utilitzava un stack simple d'Angular +
      MongoDB. Vaig decidir utilitzar Next.js i canviar a PostgreSQL, ja que
      semblava que s'adaptaven millor als requisits del projecte.
    </p>
    <p>
      Pel que fa al frontend, el canvi va ser relativament lleu. La interfície
      inicial no era complexa i replicar-la a Next.js va ser relativament
      simple. Tanmateix, vaig haver de reescriure tot el backend des de zero. La
      base de dades era completament diferent, igual que l'API i el sistema
      d'autenticació.
    </p>
    <p>
      Al final, crec que aquesta revisió completa va ser una bona decisió que ha
      donat lloc a un projecte més robust i escalable, amb un cicle de
      desenvolupament més ràpid.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Desordre de la IU</h6>
    <p>
      Un dels problemes que vaig enfrontar durant la construcció de la
      interfície d'usuari va ser el desordre. Hi havia massa elements a la
      pàgina i el disseny no era intuïtiu. Al mateix temps, volia mantenir una
      estructura de navegació clara, perquè els usuaris poguessin trobar
      fàcilment el que estaven buscant.
    </p>
    <p>
      Vaig decidir simplificar la interfície d'usuari: el menú de navegació
      consistiria en uns quants botons que enllaçaven a les seccions principals
      i un desplegable per a altres seccions i opcions, com ara l'inici de
      sessió i el canvi de tema.
    </p>
    <p>
      De la mateixa manera, també es van simplificar les targetes d'articles. En
      lloc d'escriure el text de quin tipus d'element era, o d'on prové, vaig
      decidir utilitzar icones per representar-ho i fer servir menús
      desplegables per mostrar els detalls de l'element.
    </p>
    <p>
      En general, tot i que hi ha marge de millora, crec que el disseny actual
      és un bon equilibri entre funcionalitat i claredat visual.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">
      Obtenció de dades i virtualització
    </h6>
    <p>
      Com vaig esmentar anteriorment, el projecte conté grans conjunts de dades
      als quals s'accedeix amb freqüència, com a llistes d'objectes o
      instàncies. Això, si no es gestiona correctament, podria provocar
      problemes de rendiment i temps de resposta lents.
    </p>
    <p>
      Per a solucionar això, inicialment vaig implementar una estratègia de
      cerca basada en desplaçament, on l'usuari es desplaçava per la llista
      d'elements i aquests s'obtenien per lots. Això va funcionar bé i les dades
      s'obtenien i carregaven ràpidament. No obstant això, el rendiment es
      degradava considerablement a mesura que l'usuari es desplaçava cap avall
      en la llista.
    </p>
    <p>
      Per a millorar el rendiment, vaig implementar un component de llista
      virtualizada que només representava els elements visibles. Això va
      permetre una experiència d'usuari més fluida, ja que l'usuari només veia
      els elements visibles en la pantalla i les dades es recuperaven només quan
      eren necessaris.
    </p>
  </li>
  <li>
    <h6 className="text-lg font-semibold">Adquisició de dades</h6>
    <p>
      Inicialment, el projecte depenia de les funcions Lodestone de XIVAPI per a
      buscar personatges i les seves col·leccions. No obstant això, van quedar
      obsoletes després de XIVAPI v2, i les API i biblioteques alternatives no
      eren tan adequades per a les necessitats del projecte.
    </p>
    <p>
      Lodestone és un lloc web notòriament difícil de fer scraping, i aquesta va
      ser la meva primera vegada intentant un scraping tan ampli. No obstant
      això, gràcies a l'ajuda de la comunitat, vaig aconseguir implementar
      Cheerio per a scrapear el lloc web i extreure les dades necessàries. Amb
      això, vaig realitzar una revisió completa de les funcions relacionades amb
      Lodestone, com la cerca de personatges i l'obtenció de col·leccions.
    </p>
    <p>
      El resultat final és un sistema més robust i de confiança, sense
      intermediaris innecessaris ni dependències externes.
    </p>
  </li>
</ul>
